<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Basic meta for rendering & SEO -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Iván Seldas — Data Scientist</title>
  <meta name="description" content="Architect-turned-Data Scientist in Madrid. Projects in NLP, forecasting, and recommender systems. Minimal, story-driven portfolio with real impact." />

  <!-- Fonts: serif for headlines, geometric sans for UI -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Epilogue:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    /* ======================================
       THEME TOKENS & GLOBAL RESET
       ====================================== */
    :root {
      --bg:#0c0c0c; --fg:#fff; --muted:#888; --accent:#7dd3fc; --card:#1a1a1a; --border:#2c2c2c;
    /* Spacing scale (more compact) */
  --pad-section:30px;          /* standard vertical padding tighter */
  --pad-section-compact:18px;  /* compact variant (skills) */
  /* New standardized vertical spacing tokens */
  --space-section-y:56px;              /* increased bottom padding for sections desktop */
  --space-section-y-mobile:42px;       /* increased bottom padding mobile */
  --space-section-top:44px;            /* increased top padding for clearer separation */
  --space-section-top-mobile:30px;     /* increased mobile top */
  --space-hero-top:96px;               /* existing hero top (desktop) */
  --space-hero-top-mobile:140px;       /* existing hero top (mobile) */
  --space-hero-bottom:32px;            /* bottom spacing below hero content before skills */
  --space-skills-bottom:36px;          /* spacing after integrated skills block */
  --space-header-footer-y:20px;        /* unified vertical padding for header & footer */
  /* Background asset tokens */
  --skills-bg-image:url('images/skills_bg_placeholder.svg');
  --skills-bg-opacity:0.08; /* tweak between .04 and .12 */
      /* Typography scale (5 sizes max) */
      --fs-xs:.7rem;      /* micro: tags, meta, microcopy */
      --fs-sm:.85rem;     /* small: section titles, footer */
      --fs-base:1rem;     /* body / paragraphs */
      --fs-lg:1.25rem;    /* subheads, card titles */
  --fs-xl:clamp(2.2rem,4.5vw,3rem); /* hero headline */
  /* Line-height scale */
  --lh-tight:1.4;
  --lh-base:1.55;
  --lh-body:1.68;
  --lh-relaxed:1.75;
    }
    * { box-sizing:border-box; scroll-behavior:smooth; }
    html,body {
      margin:0; padding:0; font-family:'Epilogue',sans-serif; background:var(--bg); color:var(--fg); line-height:var(--lh-base);
      /* Custom cursor (outlined circle) */
      cursor:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 100 100"><circle cx="50" cy="50" r="20" stroke="white" stroke-width="6" fill="none"/></svg>') 20 20, auto;
    }
    a {
      color:inherit; text-decoration:none;
      cursor:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 100 100"><circle cx="50" cy="50" r="20" stroke="white" stroke-width="6" fill="none"/></svg>') 20 20, auto;
    }
    .container { max-width:1024px; margin:0 auto; padding:0 20px; }

    /* ======================================
       HEADER / NAV (sticky)
       ====================================== */
    header { position:fixed; top:0; width:100%; background:rgba(12,12,12,.85); backdrop-filter:blur(8px); border-bottom:1px solid var(--border); z-index:1000; }
    nav { display:flex; justify-content:space-between; align-items:center; padding:20px 0; }
  .logo { font-family:'Playfair Display',serif; font-size:var(--fs-lg); font-weight:700; }
    .nav-links a { margin-left:20px; color:var(--muted); }
    .nav-links a:hover { color:var(--fg); text-decoration:underline; }
    /* Mobile nav toggle (hidden desktop) */
    .nav-toggle { display:none; cursor:pointer; }
    @media (max-width:680px){
      .nav-toggle { display:inline-flex; align-items:center; justify-content:center; background:#111; border:1px solid var(--border); width:46px; height:42px; border-radius:12px; position:relative; transition:.25s; }
      .nav-toggle:hover { background:#181818; }
      .nav-toggle:focus-visible { outline:2px solid var(--accent); outline-offset:2px; }
      .nav-toggle .bar { position:absolute; left:12px; right:12px; height:2px; background:var(--muted); border-radius:2px; transition:.35s cubic-bezier(.4,0,.2,1); }
      .nav-toggle .bar:nth-child(1){ top:14px; }
      .nav-toggle .bar:nth-child(2){ top:20px; }
      .nav-toggle .bar:nth-child(3){ top:26px; }
      header.nav-open .nav-toggle .bar:nth-child(1){ transform:translateY(6px) rotate(45deg); }
      header.nav-open .nav-toggle .bar:nth-child(2){ opacity:0; transform:translateX(8px); }
      header.nav-open .nav-toggle .bar:nth-child(3){ transform:translateY(-6px) rotate(-45deg); }
      .nav-links { position:fixed; top:0; right:0; height:100vh; width:240px; background:rgba(12,12,12,0.95); backdrop-filter:blur(10px); display:flex; flex-direction:column; padding:90px 26px 30px; gap:22px; border-left:1px solid var(--border); transform:translateX(100%); transition:transform .4s cubic-bezier(.4,0,.2,1); margin:0; }
      header.nav-open .nav-links { transform:translateX(0); }
      .nav-links a { margin:0; font-size:0.9rem; letter-spacing:.3px; text-decoration:none; position:relative; }
      .nav-links a::after { content:""; position:absolute; left:0; bottom:-4px; width:0; height:1px; background:var(--accent); transition:width .3s; }
      .nav-links a:focus-visible::after, .nav-links a:hover::after { width:40%; }
      body.menu-open { overflow:hidden; }
    }

    /* Sections offset so anchors aren't hidden under header */
    .section { scroll-margin-top:100px; position:relative; z-index:1; }

    /* ======================================
       HERO / INTRO
       ====================================== */
  .hero { padding:var(--space-hero-top) 0 var(--space-hero-bottom); text-align:center; }
    .hero img.profile-pic { width:140px; height:140px; border-radius:50%; object-fit:cover; border:2px solid var(--border); margin:0 auto 28px; display:block; }
  .hero h1 { font-family:'Playfair Display',serif; font-size:var(--fs-xl); line-height:1.15; letter-spacing:.5px; margin:0 auto 26px; max-width:880px; font-weight:700; }
  .hero p { color:var(--muted); font-size:var(--fs-base); max-width:700px; line-height:var(--lh-body); margin:0 auto 32px; }
  .hero p.subhead { font-size:var(--fs-lg); line-height:1.5; }
  .hero .pre-head { font-size:var(--fs-xs); letter-spacing:1px; text-transform:uppercase; color:var(--muted); margin:0 auto 18px; max-width:860px; font-weight:600; }
    .cta-buttons { display:flex; flex-wrap:wrap; gap:14px; justify-content:center; margin:0 auto 22px; max-width:760px; }
    .cta-buttons a { border:1px solid var(--border); padding:12px 20px; border-radius:10px; background:#111; transition:.2s; position:relative; }
    .cta-buttons a:hover { background:#191919; }
  .trust-microcopy { margin:4px auto 0; font-size:var(--fs-xs); letter-spacing:.6px; text-transform:uppercase; color:var(--muted); max-width:880px; line-height:1.4; }
    @media (max-width:680px){
      .hero { padding:var(--space-hero-top-mobile) 0 30px; }
  .hero h1 { font-size:clamp(2rem,6vw,2.4rem); margin-bottom:24px; }
  .hero p { font-size:var(--fs-base); margin-bottom:28px; }
      .cta-buttons { gap:10px; margin-bottom:20px; }
    }

    /* ======================================
       GENERIC SECTION STYLES
       ====================================== */
  section { padding:var(--space-section-top) 0 var(--space-section-y); position:relative; }
  @media (max-width:680px){ section { padding:var(--space-section-top-mobile) 0 var(--space-section-y-mobile); } }
  /* Gradient separators between sections (skills suppressed for integration) */
  section:not(#home)::before { content:""; position:absolute; top:0; left:50%; transform:translateX(-50%); width:100%; max-width:1040px; height:1px; background:linear-gradient(90deg,transparent,var(--border),transparent); pointer-events:none; }
  /* Remove separator (border-top) for Skills section specifically */
  /* Skills no special override needed now (line handled by generic rule) */
  /* #skills { } */
  /* Depth effects removed for flatter, cleaner layout */
    @media (max-width:680px){
      /* Slightly reduce intensity on mobile to avoid clutter */
      .section[data-depth]::after { box-shadow:inset 0 0 120px rgba(0,0,0,calc(var(--depth-vignette,0.35)*0.8)); }
      .section[data-depth]::before { opacity:.75; }
    }
  .section-title { font-size:var(--fs-sm); text-transform:uppercase; letter-spacing:1px; color:var(--muted); margin-bottom:20px; }
  .recruiter-microcopy { font-size:var(--fs-xs); letter-spacing:.4px; text-transform:uppercase; color:var(--muted); margin:-4px auto 10px; line-height:1.35; max-width:880px; text-align:center; }
  .add-missing-skill-btn { margin-left:10px; font-size:var(--fs-xs); background:transparent; border:1px solid var(--border); padding:4px 10px; border-radius:999px; cursor:pointer; color:var(--muted); transition:.2s; }
  .add-missing-skill-btn:hover { background:var(--accent); color:#000; border-color:var(--accent); }
   .skill-suggest-cta { text-align:center; margin:6px 0 4px; }
   .skill-suggest-cta .add-missing-skill-btn { margin-left:0; }
   .skill-extra-line { font-size:var(--fs-xs); color:var(--muted); text-align:center; opacity:.8; margin:4px 0 4px; }
  .add-skill-form { margin:8px 0 6px; display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
  .add-skill-form input { background:#111; border:1px solid var(--border); border-radius:8px; padding:6px 10px; color:var(--fg); font-size:var(--fs-xs); min-width:220px; }
  .add-skill-form button { font-size:var(--fs-xs); background:#111; border:1px solid var(--border); padding:6px 12px; border-radius:999px; cursor:pointer; color:var(--muted); }
  .add-skill-form button:hover { background:var(--accent); color:#000; border-color:var(--accent); }
  .skill-suggest-success { font-size:var(--fs-xs); color:var(--accent); margin:4px 0 0; text-align:center; display:none; }
  /* Condensed height just for Skills section */
  /* Integrated skills: no top padding, only bottom to separate from next section */
  #skills { padding:0 0 var(--space-skills-bottom); position:relative; overflow:hidden; }
  #skills::before { content:none !important; }
  /* Extra tightening for first sections so Projects preview appears above the fold */
  #skills .skill-intro { margin-bottom:12px; }
  /* Selected Work uses standard section spacing */
  #projects { padding:var(--space-section-y) 0; }
  @media (max-width:680px){ #projects { padding:var(--space-section-y-mobile) 0; } }
  #projects .section-title { margin-bottom:14px; }
  /* Decorative background for skills (non-intrusive) */
  #skills::before { content:""; position:absolute; inset:0; background:
      radial-gradient(circle at 20% 30%, rgba(125,211,252,0.12), transparent 60%),
      radial-gradient(circle at 80% 70%, rgba(125,211,252,0.10), transparent 65%),
      var(--skills-bg-image) center/cover no-repeat;
      mix-blend-mode:normal; opacity:var(--skills-bg-opacity); filter:grayscale(100%) contrast(110%) brightness(85%);
      pointer-events:none; z-index:0; }
  #skills > .container { position:relative; z-index:1; }
  /* Clear skills button */
  .clear-skills-btn { margin:12px 0 0; font-size:var(--fs-xs); background:transparent; border:1px dashed var(--border); padding:6px 14px; border-radius:999px; color:var(--muted); cursor:pointer; transition:.2s; display:none; }
  .clear-skills-btn.visible { display:inline-block; }
  .clear-skills-btn:hover { border-color:var(--accent); color:#000; background:var(--accent); }
  /* ======================================
    PROJECT LOCAL VIDEO HOVER PREVIEW
    ====================================== */
  #projects .video-wrapper { position:relative; width:100%; aspect-ratio:16/9; background:#000; border-radius:14px; overflow:hidden; border:1px solid var(--border); }
  #projects .video-wrapper video { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; display:block; border:none; background:#000; opacity:0; transition:opacity .4s ease, filter .3s ease; }
  #projects .video-wrapper.ready video { opacity:1; }
  #projects .video-wrapper::after { content:""; position:absolute; inset:0; background:linear-gradient(180deg,rgba(0,0,0,.18),rgba(0,0,0,.45)); pointer-events:none; transition:opacity .4s; opacity:.55; }
  #projects .video-wrapper.playing::after { opacity:0; }
  #projects .video-wrapper:focus-visible { outline:2px solid var(--accent); outline-offset:3px; }
  #projects .video-wrapper:hover video { filter:brightness(1.05); }
  @media (prefers-reduced-motion: reduce){ #projects .video-wrapper video { transition:none; } }
  /* Skills grouping */
  .skill-intro { color:var(--muted); font-size:var(--fs-base); max-width:820px; line-height:1.6; margin:4px 0 18px; }
  .skill-groups { display:grid; gap:16px; }
  .skill-group { border:1px solid var(--border); padding:10px 12px 10px; border-radius:10px; background:#111; position:relative; }
  .skill-group h4 { margin:0 0 4px; font-size:var(--fs-xs); letter-spacing:.75px; text-transform:uppercase; color:#c0c0c0; font-weight:600; display:flex; align-items:center; gap:6px; }
  .skill-group .icon { width:15px; height:15px; stroke:var(--accent); stroke-width:1.4; fill:none; opacity:.85; flex-shrink:0; }
  .skill-group .tags { margin-top:4px; }
  /* Compact card style per category */
  .skill-groups.compact-cards { display:grid; gap:10px; }
  .skill-groups.compact-cards { grid-template-columns:1fr; }
  @media (min-width:640px){ .skill-groups.compact-cards { grid-template-columns:1fr 1fr; } }
  @media (min-width:1000px){ .skill-groups.compact-cards { grid-template-columns:repeat(3,1fr); } }
  .skill-group.card-compact { background:#111; border:1px solid var(--border); border-radius:10px; padding:10px 12px 8px; }
  .skill-group.card-compact h4 { margin:0 0 4px; font-size:var(--fs-xs); letter-spacing:.75px; text-transform:uppercase; color:#bdbdbd; font-weight:600; }
  .skill-group.card-compact .tags { display:flex; flex-wrap:wrap; gap:6px; margin-top:2px; }
  /* Six-column layout */
  .skill-columns { display:grid; gap:10px 28px; align-items:start; grid-auto-rows:minmax(0,auto); }
  .skill-columns .skill-col { padding:0; background:transparent; border:none; display:flex; flex-direction:column; gap:6px; }
  .skill-columns .skill-col h4 { margin:0; font-size:var(--fs-xs); letter-spacing:.75px; color:#a0a0a0; font-weight:600; line-height:1.2; }
  .skill-columns .skill-col h4::after { content:''; display:block; width:100%; height:1px; background:linear-gradient(90deg,var(--border),transparent); margin-top:4px; opacity:.8; }
  .skill-columns .skill-col .tags { align-self:flex-start; }
  .skill-columns .tags { display:flex; flex-wrap:wrap; gap:6px; }
  .skill-columns .tag { font-size:var(--fs-xs); padding:4px 8px; }
  @media (min-width:680px){ .skill-columns { grid-template-columns:repeat(2,1fr); } }
  @media (min-width:960px){ .skill-columns { grid-template-columns:repeat(3,1fr); } }
  /* Keep 6 columns but give the last (specialized techniques) extra width for long labels */
  @media (min-width:1280px){ .skill-columns { grid-template-columns:repeat(5,1fr) 1.45fr; } }
  /* Prevent wrapping of long tag text */
  #skills .tag[data-skill="Hyperparameter Tuning"] { white-space:nowrap; }
  @media (min-width:860px){ .skill-groups.compact-cards { grid-template-columns:repeat(2,1fr); } }
  @media (min-width:1180px){ .skill-groups.compact-cards { grid-template-columns:repeat(3,1fr); } }
  .skill-group .tags { margin-top:4px; }
  .recruiter-note { margin-top:20px; font-size:var(--fs-xs); letter-spacing:.45px; text-transform:uppercase; color:var(--muted); line-height:1.3; }
  /* Compact tags inside skills only */
  #skills .tag { padding:4px 8px; font-size:var(--fs-xs); }
  @media (min-width:800px){ .skill-groups { grid-template-columns:repeat(2,1fr); } }
  @media (min-width:1150px){ .skill-groups { grid-template-columns:repeat(3,1fr); } }

    /* ======================================
       SELECTED WORK — CARD LAYOUT
       + reveal-on-scroll and light parallax
       ====================================== */
    .card {
      grid-column:span 12; border:1px solid var(--border); background:var(--card);
      border-radius:16px; padding:18px; margin-bottom:10px; /* base spacing (overridden in #projects) */
      transition:transform .15s ease, border-color .2s ease, opacity .6s ease;
      opacity:0; transform:translateY(24px); will-change: transform;
    }
    /* Larger vertical separation between project cards */
    #projects .card { margin-bottom:28px; }
    #projects .card:last-of-type { margin-bottom:0; }
    .card.visible { opacity:1; transform:translateY(0); }
    .card:hover { transform:translateY(-2px); border-color:#2a2a2a; }
  .card .row { display:flex; gap:18px; flex-direction:column; }
  .card .media { display:flex; flex-direction:column; }
    .card img { width:100%; border-radius:12px; border:1px solid var(--border); will-change:transform; transition:transform .3s ease; }
  /* Remove legacy iframe-based video styles; simplified above for local MP4 */
    @media (min-width:900px){
      .card .media { display:flex; flex-direction:column; align-items:center; justify-content:flex-start; }
      .card .media img { width:100%; height:auto; object-fit:contain; }
      .card .media .tag-block { align-self:flex-start; width:100%; }
    }
  .card h3 { margin:2px 0 8px; font-size:clamp(1.18rem,1.7vw,1.48rem); line-height:1.15; letter-spacing:.4px; }
  /* Make project titles visibly clickable */
  .card h3, .card h3 a { text-decoration:none; }
  .card h3:hover, .card h3 a:hover, .card h3:focus-within a, .card h3[role="button"]:focus-visible {
    text-decoration:underline;
    text-underline-offset:3px;
  }
  /* Match project description typography to bio-full paragraphs */
  .card p { color:#c9c9c9; margin:0 0 10px; font-size:0.88rem; line-height:1.7; }
  /* Spacing blocks inside cards */
  .card .desc-block { margin-bottom:10px; }
  .card .tag-block { margin:4px 0 10px; }
  .card .links-block { margin-top:10px; display:flex; gap:10px; flex-wrap:wrap; }
  .card .links-block a.btn { font-size:0.65rem; letter-spacing:.6px; text-transform:uppercase; border:1px solid var(--border); padding:8px 14px; border-radius:999px; background:#111; color:#bdbdbd; transition:.2s; }
  .card .links-block a.btn:hover { background:var(--accent); color:#000; border-color:var(--accent); }
  /* Impact emphasis */
  .card .impact { margin:4px 0 4px; font-size:0.78rem; line-height:1.45; font-weight:600; color:#e2e2e2; position:relative; padding:8px 12px 8px 14px; background:#141414; border:1px solid var(--border); border-radius:10px; }
  .card .impact strong { color:var(--accent); font-weight:600; }
  .card .impact::before { content:"Impact"; position:absolute; top:-9px; left:12px; font-size:0.55rem; letter-spacing:1px; text-transform:uppercase; padding:2px 6px; background:#111; border:1px solid var(--border); border-radius:6px; color:#8d8d8d; }
  #projects .card .tags .tag { padding:4px 8px; font-size:var(--fs-xs); letter-spacing:.3px; }
  #projects .card .tags { gap:6px; }
  #projects .card .tag-block { margin:2px 0 8px; }
  .card .hook-question { margin:0 0 10px; font-size:0.92rem; line-height:1.45; font-weight:600; letter-spacing:.2px; }
  .card .desc-list { margin:0 0 8px 0; padding:0 0 0 16px; font-size:0.83rem; line-height:1.58; color:#c5c5c5; }
  .card .desc-list li { margin:0 0 4px; }
  .card .desc-list li:last-child { margin-bottom:0; }
  /* Arrow bullet variant for concise, single-line items */
  .card .desc-list.arrow { list-style:none; padding-left:0; }
  .card .desc-list.arrow li { position:relative; padding-left:22px; }
  .card .desc-list.arrow li::before {
    content:""; position:absolute; left:0; top:0.48em; width:12px; height:12px;
    background-repeat:no-repeat; background-size:12px 12px;
    background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"><path d="M5 12h14M13 5l7 7-7 7" fill="none" stroke="%234da6ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>');
  }
  .card .stack-line { margin:2px 0 10px; font-size:0.64rem; letter-spacing:.8px; text-transform:uppercase; color:#9fa0a0; font-weight:600; }
  .card .stack-line strong { color:#cfd0d0; font-weight:600; }
  .card .microhook { font-style:italic; margin:0 0 10px; font-size:0.85rem; line-height:1.5; color:#d2d2d2; letter-spacing:.2px; }
  .card .compact-stack { margin:4px 0 6px; font-size:0.62rem; letter-spacing:.6px; text-transform:uppercase; color:#9fa0a0; font-weight:600; }
  .card .impact-inline { margin:4px 0 10px; font-size:0.78rem; line-height:1.45; color:#e0e0e0; }
  .card .impact-inline strong { color:var(--accent); font-weight:600; }
  .card .results-block { margin:10px 0 16px; padding:0; background:transparent; border:none; position:relative; }
  :root { --blue-brand:#4da6ff; }
  .card .results-inline-label { font-size:0.7rem; letter-spacing:1.4px; text-transform:uppercase; color:var(--blue-brand); font-weight:700; margin:0 0 10px; display:inline-block; position:relative; }
  .card .results-inline-label::after { content:""; position:absolute; left:0; bottom:-4px; height:2px; width:64px; background:var(--blue-brand); border-radius:2px; opacity:.95; }
  .card .results-list { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:6px; }
  /* Unified results list item line-height */
  .card .results-list li { display:flex; gap:8px; align-items:flex-start; font-size:0.8rem; line-height:1.6; color:#dcdcdc; }
  .card .results-list .res-icon { width:18px; height:18px; flex-shrink:0; display:inline-flex; align-items:center; justify-content:center; margin-top:2px; }
  .card .results-list .res-icon svg { width:18px; height:18px; stroke:var(--blue-brand); stroke-width:1.7; fill:none; }
  .card .results-list .res-icon.speed svg { stroke-width:1.9; }
  .card .microhook-line { font-style:italic; font-size:0.9rem; line-height:1.58; margin:4px 0 14px; background:linear-gradient(90deg,var(--accent) 0%, var(--accent) 100%); -webkit-background-clip:text; background-clip:text; color:transparent; filter:drop-shadow(0 0 6px rgba(255,170,0,0.25)); font-weight:500; letter-spacing:.2px; }
  .card .intro-story { font-size:0.9rem; line-height:1.6; color:#dcdcdc; margin:0 0 6px; font-weight:500; }
  .card .metric { color:var(--blue-brand); font-weight:600; letter-spacing:.4px; }
  .card .results-block::before { content:""; display:none; }
  .card .results-list .res-arrow { color:var(--blue-brand); font-weight:700; font-size:0.78rem; line-height:1.2; transform:translateY(2px); }
  @media (max-width:640px){ .card .results-block { margin:18px 0 12px; } }
  .card .links-block .case-link { display:inline-block; margin-left:8px; font-size:0.58rem; letter-spacing:.5px; text-transform:uppercase; }
  .card .links-block .case-link a { color:#8f8f8f; text-decoration:none; border-bottom:1px dotted #555; padding-bottom:1px; }
  .card .links-block .case-link a:hover { color:var(--accent); border-color:var(--accent); }
  /* Subtle dividers between logical blocks */
  .card .section-divider { height:1px; background:linear-gradient(90deg,transparent,var(--border),transparent); margin:10px 0 12px; opacity:.85; }
  /* Expandable project details */
  .card .project-details { display:none; border-top:1px solid var(--border); margin-top:12px; padding-top:12px; }
  .card.open .project-details { display:block; }
  .project-details .detail-header { display:flex; align-items:center; justify-content:space-between; gap:10px; margin:0 0 10px; }
  .project-details .detail-title { margin:0; font-size:0.95rem; letter-spacing:.3px; }
  .project-details .detail-actions { display:flex; gap:10px; flex-wrap:wrap; }
  .project-details .detail-actions .btn { font-size:0.62rem; letter-spacing:.6px; text-transform:uppercase; border:1px solid var(--border); padding:7px 12px; border-radius:999px; background:#111; color:#bdbdbd; }
  .project-details .detail-actions .btn:hover { background:var(--accent); color:#000; border-color:var(--accent); }
  .project-details .app-embed { margin:10px 0 0; }
  .project-details .app-frame { width:100%; height:65vh; min-height:420px; border:1px solid var(--border); border-radius:12px; background:#0a0a0a; }
  .project-details .app-fallback { font-size:0.78rem; color:#a9a9a9; margin:8px 0 0; }
  /* Make project titles operable */
  .card h3[role="button"] { cursor:pointer; }
    .tags { display:flex; gap:8px; flex-wrap:wrap; }
  .tag { padding:6px 10px; border-radius:999px; border:1px solid var(--border); color:#bdbdbd; font-size:var(--fs-xs); background:var(--card); transition:all .2s ease; cursor:url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" viewBox=\"0 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"20\" stroke=\"white\" stroke-width=\"6\" fill=\"none\"/></svg>') 20 20, auto; }
    .tag:hover { transform:scale(1.05); background:var(--accent); color:#000; border-color:var(--accent); }
    /* Selected state for multi-select skills */
    .tag.selected { background:var(--accent); color:#000; border-color:var(--accent); }
  .card .meta { color:var(--muted); font-size:var(--fs-xs); }
    @media(min-width:900px){ .card .row{flex-direction:row} .card .col{flex:1} .card .media{flex:1.2} }

    /* Two-column helper */
    .two-cols { display:grid; gap:24px; grid-template-columns:1fr; }
    @media(min-width:768px){ .two-cols{ grid-template-columns:1fr 1fr; } }

    /* ======================================
       CONTACT — Lifestyle collage grid
       ====================================== */
  /* (Removed lifestyle photo collage styles) */
  /* CONTACT new layout */
  .contact-block { max-width:1040px; margin:0 auto; position:relative; }
  /* Subtle grid/blueprint style background (very low contrast) */
  #contact { position:relative; }
  /* Move blueprint grid to ::after so ::before can show separator line */
  #contact::after { content:""; position:absolute; inset:0; pointer-events:none; background:
      linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px) 0 0/ 22px 22px,
      linear-gradient(90deg, rgba(255,255,255,0.025) 1px, transparent 1px) 0 0/ 22px 22px; opacity:.4; mask:linear-gradient(180deg,rgba(0,0,0,.6),rgba(0,0,0,.2)); z-index:0; }
  /* Strengthen separator above Contact for clarity */
  #contact.section::before { background:linear-gradient(90deg,transparent,#3b3b3b,#3b3b3b,transparent); }
  .contact-intro { margin:-4px 0 18px; }
  .contact-intro .hook-line { margin:0; font-size:0.92rem; line-height:1.5; color:#c9c9c9; max-width:760px; }
  .contact-grid { display:grid; gap:28px 46px; grid-template-columns:1fr 1fr; align-items:start; }
  @media (max-width:820px){ .contact-grid { grid-template-columns:1fr; } }
  .contact-primary { display:flex; flex-direction:column; gap:14px; }
  .contact-email-btn { display:inline-block; background:var(--accent); color:#000; padding:14px 30px 13px; font-size:0.8rem; letter-spacing:1px; font-weight:600; text-transform:uppercase; border-radius:14px; border:1px solid var(--accent); box-shadow:0 0 0 0 rgba(125,211,252,0.4); transition:.3s; }
  .contact-email-btn:hover { transform:translateY(-2px); box-shadow:0 8px 24px -6px rgba(125,211,252,0.3); }
  .contact-email-btn .icon { margin-right:8px; position:relative; top:1px; }
  .availability { font-size:0.75rem; letter-spacing:.5px; text-transform:uppercase; color:#a7a7a7; }
  .contact-links { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:10px; }
  .contact-links li { display:flex; flex-direction:column; font-size:0.8rem; line-height:1.35; position:relative; padding-left:30px; }
  .contact-links li .link-row { display:inline-flex; align-items:center; gap:6px; flex-wrap:wrap; }
  .contact-links li .label { font-size:0.65rem; letter-spacing:.8px; text-transform:uppercase; color:#6f6f6f; margin-bottom:2px; font-weight:600; }
  .contact-links a { color:#cfd0d0; font-size:0.78rem; word-break:break-all; position:relative; padding-left:0; }
  .contact-links a:hover { color:#fff; }
  .contact-links a.resume-link small { font-size:0.6rem; letter-spacing:.6px; color:#8d8d8d; margin-left:4px; }
  .contact-links a.booking-link { color:var(--accent); }
  .contact-aside { font-size:0.75rem; line-height:1.5; color:#b8b8b8; display:flex; flex-direction:column; gap:10px; }
  .contact-aside .micro-bio { margin:0; font-size:0.78rem; line-height:1.45; color:#d0d0d0; }
  .contact-aside .micro-note { margin:0; font-size:0.65rem; letter-spacing:.6px; text-transform:uppercase; color:#8a8a8a; line-height:1.4; }
  .contact-photo { margin:0 0 10px; }
  .contact-photo img { width:150px; height:150px; object-fit:cover; border-radius:18px; border:1px solid var(--border); display:block; background:#111; }
  @media (max-width:520px){ .contact-photo img { width:130px; height:130px; } }
  .contact-signature { margin-top:4px; display:flex; align-items:center; gap:10px; }
  .contact-signature img { width:48px; height:48px; border-radius:50%; object-fit:cover; border:1px solid var(--border); background:#111; }
  .contact-signature span { font-size:0.7rem; letter-spacing:.8px; text-transform:uppercase; color:#888; font-weight:600; }
  /* Icon base */
  .icon { width:14px; height:14px; display:inline-block; }
  .icon svg { width:100%; height:100%; stroke:currentColor; stroke-width:1.6; fill:none; }
  /* Colored accent for icons inside labels */
  .contact-links li::before { content:""; position:absolute; left:4px; top:18px; width:18px; height:18px; opacity:.7; }
  .contact-links li[data-type=email]::before { background:radial-gradient(circle at 40% 40%, var(--accent), transparent 70%); }
  .contact-links li[data-type=linkedin]::before { background:radial-gradient(circle at 40% 40%, #0A66C2, transparent 70%); }
  .contact-links li[data-type=github]::before { background:radial-gradient(circle at 40% 40%, #999, transparent 70%); }
  .contact-links li[data-type=portfolio]::before { background:radial-gradient(circle at 40% 40%, #7dd3fc, transparent 70%); }
  .contact-links li[data-type=resume]::before { background:radial-gradient(circle at 40% 40%, #4ade80, transparent 70%); }
  .contact-links li[data-type=booking]::before { background:radial-gradient(circle at 40% 40%, #fbbf24, transparent 70%); }
  /* Remove specific icons (visual markers) for LinkedIn, GitHub, Resume as requested */
  .contact-links li[data-type=linkedin]::before,
  .contact-links li[data-type=github]::before,
  .contact-links li[data-type=resume]::before { display:none; }
  .contact-links li[data-type=linkedin],
  .contact-links li[data-type=github],
  .contact-links li[data-type=resume] { padding-left:0; }

    /* Footer */
  footer { padding:var(--space-header-footer-y) 0; text-align:center; color:var(--muted); font-size:var(--fs-sm); border-top:1px solid var(--border); display:flex; align-items:center; justify-content:center; }

  /* ======================================
    ABOUT (New structure: Bio + 2-col grid + CTA)
    ====================================== */
  #about { padding:48px 0; }
  @media (max-width:680px){ #about { padding:38px 0; } }
  #about .about-bio { max-width:780px; margin:0 0 20px; text-align:left; }
  #about .about-bio p { margin:0; font-size:0.9rem; line-height:1.65; color:#c9c9c9; }
  #about .about-bio p .intro-lead { font-weight:600; }
  #about .about-bio .bio-compact { margin-top:4px; }
  #about .about-bio details.bio-more { margin-top:8px; }
  #about .about-bio details summary { cursor:pointer; list-style:none; font-size:0.8rem; letter-spacing:.5px; text-transform:uppercase; color:#888; transition:color .2s; }
  #about .about-bio details summary.hook { display:inline-block; background:#111; border:1px solid var(--border); padding:10px 16px 9px; border-radius:999px; font-size:0.68rem; letter-spacing:1.2px; font-weight:600; color:#bdbdbd; position:relative; overflow:hidden; text-transform:uppercase; }
  #about .about-bio details summary.hook:before { content:""; position:absolute; inset:0; background:radial-gradient(circle at 30% 40%, rgba(125,211,252,0.18), transparent 60%); opacity:0; transition:opacity .4s; }
  #about .about-bio details summary.hook:hover { color:#fff; border-color:#3a3a3a; }
  #about .about-bio details summary.hook:hover:before { opacity:1; }
  #about .about-bio details[open] summary.hook { background:var(--accent); color:#000; border-color:var(--accent); }
  #about .about-bio details summary.hook:focus-visible { outline:2px solid var(--accent); outline-offset:2px; }
  #about .about-bio details[open] summary { color:#bbb; }
  #about .about-bio details summary::-webkit-details-marker { display:none; }
  #about .about-bio details summary:before { content:"+"; display:inline-block; margin-right:6px; font-weight:500; color:#666; transition:transform .25s; }
  #about .about-bio details[open] summary:before { content:"–"; }
  #about .about-bio .bio-block { margin-top:8px; animation:fadeIn .25s ease; }
  #about .about-bio .bio-block p { font-size:0.88rem; line-height:1.7; margin:0 0 12px; }
  #about .about-bio .bio-block p:last-child { margin-bottom:0; }
  @keyframes fadeIn { from { opacity:0; transform:translateY(2px); } to { opacity:1; transform:translateY(0); } }
  #about .about-bio a.inline-link { position:relative; text-decoration:none; color:#c9c9c9; transition:color .25s; }
  #about .about-bio a.inline-link::after { content:""; position:absolute; left:0; bottom:-2px; width:100%; height:1px; background:currentColor; opacity:.45; transition:opacity .25s, transform .25s; transform:scaleX(1); transform-origin:left; }
  #about .about-bio a.inline-link:hover { color:#ffffff; }
  #about .about-bio a.inline-link:hover::after { opacity:.85; }
  #about .about-bio a.inline-link:focus-visible { outline:2px solid #666; outline-offset:2px; }
  #about .about-bio a.inline-link:focus-visible::after { opacity:1; }
  #about .about-grid { max-width:1040px; margin:0 auto 26px; display:grid; grid-template-columns:1fr 1fr; gap:26px 46px; align-items:stretch; }
  /* Photo + content layout variant */
  #about .about-grid.with-photo { grid-template-columns:320px 1fr; }
  @media (max-width:900px){ #about .about-grid.with-photo { grid-template-columns:280px 1fr; } }
  @media (max-width:760px){ #about .about-grid.with-photo { grid-template-columns:1fr; } }
  #about .about-photo { position:relative; display:flex; }
  #about .about-photo-inner { position:static; top:auto; display:flex; flex-direction:column; gap:8px; height:100%; width:100%; }
  @media (max-width:760px){ #about .about-photo-inner { position:static; top:auto; flex-direction:row; align-items:center; } }
  #about .about-photo figure { margin:0; flex:1; display:flex; flex-direction:column; }
  #about .about-photo img { width:100%; height:100%; object-fit:cover; border-radius:16px; border:1px solid var(--border); display:block; background:#111; flex:1; }
  #about .about-photo figcaption { font-size:var(--fs-xs); color:var(--muted); text-align:left; margin-top:6px; letter-spacing:.4px; }
  @media (max-width:760px){ #about .about-photo img { width:140px; height:auto; aspect-ratio:1/1; border-radius:16px; } #about .about-photo figcaption { flex:1; } }
  #about .about-detail { display:flex; flex-direction:column; gap:24px; }
  @media (max-width:760px){ #about .about-detail { gap:18px; } }
  @media (max-width:900px){ #about .about-grid { gap:22px 34px; } }
  @media (max-width:720px){ #about .about-grid { grid-template-columns:1fr; gap:20px; } }
  #about h3 { font-size:var(--fs-lg); margin:0 0 12px; font-weight:600; letter-spacing:.3px; line-height:1.25; }
  #about .about-grid ul { margin:0; padding:0; list-style:none; display:flex; flex-direction:column; gap:8px; }
  #about .about-grid ul li { position:relative; padding-left:14px; font-size:0.9rem; line-height:1.45; color:#d0d0d0; }
  #about .about-grid ul li::before { content:""; position:absolute; left:0; top:8px; width:6px; height:6px; border-radius:50%; background:var(--accent); opacity:.85; }
  #about .about-grid ul li small { display:block; margin-top:4px; color:#9f9f9f; font-size:0.72rem; letter-spacing:.4px; }
  #about .about-cta { max-width:700px; margin:0 auto; text-align:center; }
  #about .about-cta p { margin:0 0 14px; font-size:0.9rem; line-height:1.4; color:#c9c9c9; }
  #about .about-cta a.cta-link { display:inline-block; border:1px solid var(--border); padding:12px 24px; border-radius:999px; font-size:var(--fs-sm); letter-spacing:.5px; text-transform:uppercase; background:#111; color:#fff; transition:.25s; }
  #about .about-cta a.cta-link:hover { background:var(--accent); color:#000; border-color:var(--accent); }
  /* subtle divider above grid */
  #about .about-grid::before { content:""; position:absolute; }
  /* Utility wrapper to position divider */
  #about .about-grid-wrapper { position:relative; }
  /* Removed internal divider inside About; global section separators now handle transitions */
  #about .about-grid-wrapper::before { content:none; }
  /* About spacing overrides to reduce excessive gap before Contact */
  #about { padding-bottom:8px; }
  #about .about-grid { margin:0 auto 10px; }

    /* ======================================
       CLICK RIPPLE (CSS-only animation; JS appends/removes node)
       ====================================== */
    .click-feedback { position:fixed; width:40px; height:40px; border:3px solid var(--accent); border-radius:50%; pointer-events:none; opacity:.7; transform:scale(0); animation:clickRipple .4s ease-out forwards; z-index:9999; }
    @keyframes clickRipple { 0%{transform:scale(0);opacity:.7} 100%{transform:scale(2);opacity:0} }
  /* Reduced medium paragraph size (hero + about bio) */
  .hero p:not(.subhead),
  #about .bio-block p { font-size:0.92rem; line-height:1.45; }
  /* Short bio toggle for very small screens */
  #about .about-bio .short-bio { display:none; }
  @media (max-width:380px){
  /* removed long-bio differentiation; unified under .bio-block */
    #about .about-bio .short-bio { display:block; }
  }
  </style>
</head>
<body>
  <!-- Sticky header with simple nav -->
  <header>
    <div class="container">
      <nav>
        <div class="logo">Iván Seldas</div>
        <button class="nav-toggle" id="nav-toggle" aria-label="Open navigation" aria-expanded="false" aria-controls="site-nav-links">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </button>
        <div class="nav-links" id="site-nav-links">
          <a href="#home">Home</a>
          <a href="#projects">Work</a>
          <a href="#about">About</a>
          <a href="#contact">Contact</a>
        </div>
      </nav>
    </div>
  </header>

  <!-- HERO / INTRO -->
  <section class="hero section" id="home">
    <div class="container">
      <!-- Replace this src with your real portrait -->
      <!-- Foto de perfil optimizada (reducción de peso y srcset para pantallas retina) -->
      <img 
        src="./images/optimized/profile_pic_480.jpg" 
        srcset="./images/optimized/profile_pic_480.jpg 1x, ./images/profile_pic.jpg 2x" 
        width="140" height="140"
        alt="Foto de perfil de Iván Seldas" 
        class="profile-pic" 
        loading="lazy"
      />
  <div class="pre-head">DATA SCIENTIST & ARCHITECT</div>
  <h1>NEED A DATA SCIENTIST WHO SPEAKS YOUR CLIENT'S LANGUAGE?</h1>
  <p class="subhead">I build end-to-end ML projects that clients understand – ensuring results are business-relevant.</p>
      <div class="cta-buttons" aria-label="Primary call to action">
        <a href="#projects">SEE HOW I DELIVER RESULTS</a>
      </div>
  <div class="trust-microcopy">Available for freelance projects & full-time roles · Business-ready impact · Live demos & repos</div>
    </div>
  </section>

  <!-- SKILLS (chips) — names must match project data-skill to link properly -->
  <section class="section" id="skills">
    <div class="container">
      <div class="skill-columns" id="skill-groups">
        <div class="skill-col" data-group="languages">
          <h4>LANGUAGES</h4>
          <div class="tags">
            <span class="tag" data-skill="Python">Python</span>
            <span class="tag" data-skill="SQL">SQL</span>
            <span class="tag" data-skill="PySpark">PySpark</span>
          </div>
        </div>
        <div class="skill-col" data-group="ml-modeling">
          <h4>ML & MODELING</h4>
          <div class="tags">
            <span class="tag" data-skill="scikit-learn">scikit-learn</span>
            <span class="tag" data-skill="XGBoost">XGBoost</span>
            <span class="tag" data-skill="Random Forest">Random Forest</span>
            <span class="tag" data-skill="K-Means">K-means</span>
            <span class="tag" data-skill="DBScan">DBScan</span>
            <span class="tag" data-skill="Statsmodels">Statsmodels</span>
          </div>
        </div>
        <div class="skill-col" data-group="nlp-ai">
          <h4>NLP & AI</h4>
          <div class="tags">
            <span class="tag" data-skill="Hugging Face">Hugging Face</span>
            <span class="tag" data-skill="Transformers">Transformers</span>
            <span class="tag" data-skill="RoBERTa">RoBERTa</span>
            <span class="tag" data-skill="LangChain">LangChain</span>
            <span class="tag" data-skill="OpenAI">OpenAI</span>
            <span class="tag" data-skill="Embeddings">Embeddings</span>
            <span class="tag" data-skill="RAG">RAG</span>
          </div>
        </div>
        <div class="skill-col" data-group="cloud">
          <h4>CLOUD & BIG DATA</h4>
          <div class="tags">
            <span class="tag" data-skill="AWS">AWS</span>
            <span class="tag" data-skill="GCP">GCP</span>
            <span class="tag" data-skill="Airflow">AirFlow</span>
            <span class="tag" data-skill="Supabase">Supabase</span>
            <span class="tag" data-skill="Vector DB">Vector DB</span>
          </div>
        </div>
        <div class="skill-col" data-group="deployment">
          <h4>DEPLOYMENT & APIS</h4>
          <div class="tags">
            <span class="tag" data-skill="FastAPI">Fast API</span>
            <span class="tag" data-skill="Streamlit">Streamlit</span>
            <span class="tag" data-skill="Docker">Docker</span>
            <span class="tag" data-skill="n8n">n8n</span>
            <span class="tag" data-skill="Telegram Bot">Telegram Bot</span>
          </div>
        </div>
        <div class="skill-col" data-group="specialized">
          <h4>SPECIALIZED TECHNIQUES</h4>
          <div class="tags">
            <span class="tag" data-skill="Time Series">Time Series</span>
            <span class="tag" data-skill="SARIMA">SARIMA</span>
            <span class="tag" data-skill="Recommender Systems">Recomender Systems</span>
            <span class="tag" data-skill="Feature Store">Feature Stores</span>
            <span class="tag" data-skill="Hyperparameter Tuning">Hyperparameter Tuning</span>
          </div>
        </div>
      </div>
  <button id="clear-skills-btn" type="button" class="clear-skills-btn" aria-hidden="true" aria-label="Clear selected skills">Clear selected skills ✕ <span id="skill-match-count" style="display:none;opacity:.8;font-weight:500;">(0 matches)</span></button>
  <p class="recruiter-microcopy" style="margin-top:10px; text-transform:none;">Missing a skill? Not a problem — I'll <strong>master it in 7 days.</strong></p>
  <div class="skill-suggest-cta">
    <button id="add-missing-skill-btn" type="button" class="add-missing-skill-btn">Suggest a Skill</button>
  </div>
  <form id="add-missing-skill-form" class="add-skill-form" style="display:none; justify-content:center;">
        <label for="new-skill-input" class="visually-hidden" style="position:absolute;left:-9999px;">New skill</label>
        <input id="new-skill-input" type="text" placeholder="Enter skill (comma separated allowed)" />
        <button type="submit">Save</button>
        <button type="button" id="cancel-add-skill">Cancel</button>
      </form>
  <div class="skill-suggest-success" id="skill-suggest-success">Saved. Total suggestions: <span id="suggest-count">0</span>. <button id="export-skill-suggestions" style="background:transparent;border:1px solid var(--border);color:var(--muted);padding:4px 10px;border-radius:999px;cursor:pointer;">Export</button></div>
    </div>
  </section>

  <!-- SELECTED WORK -->
  <section class="section" id="projects">
    <div class="container">
      <div class="section-title">Selected Work</div>

  <!-- PROJECT 1B: Automated Content Generator - Agentic RAG Workflow -->
      <article class="card">
        <div class="row">
          <div class="col">
            <h3><a href="projects/content-automation/index.html" class="project-link" aria-label="Open case study: Automated Content Generator - Agentic RAG Workflow">Automated Content Generator - Agentic RAG Workflow</a></h3>
            <p class="microhook-line" style="margin-top:2px;">Manual drafts are slow. Generate long-form, cited content from your internal docs. </p>
            <div class="desc-block" style="margin-top:-2px;">
              <ul class="desc-list" style="margin:4px 0 6px;">
                <li><strong>Automated research and article generation </strong> using your own content base, retrieved from a vectorized PostgreSQL database.</li>
                <li><strong>Delivered</strong> structured, verifiable content with citation tracking and quality controls.</li>
              </ul>
            </div>
            <div class="results-block" style="margin:6px 0 14px;">
              <div class="results-inline-label">Results</div>
              <ul class="desc-list arrow" style="margin:6px 0 0 0;">
                <li><span class="metric">Reduces</span> content creation <span class="metric">time</span> to a minimum</li>
                <li>Maintains content <span class="metric">structure</span> and <span class="metric">quality standards</span></li>
                <li>Only <span class="metric">stored docs</span> + citations (no hallucination)</li>
              </ul>
            </div>
            <div class="links-block" style="margin-top:4px;">
              <a class="btn" href="mailto:ivanseldasp@gmail.com?subject=Content%20Automation%20Workflow%20demo" target="_blank" rel="noopener noreferrer">Request Demo</a>
              <a class="btn" href="#" target="_blank" rel="noopener noreferrer">GitHub</a>
            </div>
          </div>
          <div class="media">
            <div class="video-wrapper" aria-label="Video demo: Automated Content Generator - Agentic RAG Workflow">
              <video class="project-video" muted loop playsinline preload="metadata" data-src="videos/projects/content_automation_demo_720.mp4"></video>
            </div>
            <div class="tag-block tags" style="margin-top:28px;">
              <span class="tag" data-skill="n8n">n8n</span>
              <span class="tag" data-skill="LangChain">LangChain</span>
              <span class="tag" data-skill="OpenAI">OpenAI</span>
              <span class="tag" data-skill="Telegram Bot">Telegram Bot</span>
              <span class="tag" data-skill="Supabase">Supabase</span>
              <span class="tag" data-skill="Vector DB">Vector DB</span>
              <span class="tag" data-skill="Embeddings">Embeddings</span>
              <span class="tag" data-skill="RAG">RAG</span>
            </div>
          </div>
        </div>
      </article>

      <!-- PROJECT 1 -->
      <article class="card">
        <div class="row">
          <div class="col">
            <h3><a href="projects/sentiment/index.html" class="project-link" aria-label="Open case study: Sentiment-Driven Video Recommendation System">Sentiment-Driven Video Recommendation System</a></h3>
            <p class="microhook-line" style="margin-top:2px;">Ever wondered what AI fans really want to watch next? <span class="intro-story" style="display:inline; font-style:normal; background:none; background-clip:initial; color:#dcdcdc; -webkit-background-clip:initial; filter:none;"><br>I turned <strong>180K+ YouTube comments</strong> into personalized video suggestions.</span></p>
            <div class="desc-block" style="margin-top:-2px;">
              <ul class="desc-list" style="margin:4px 0 6px;">
                <li>Video recommendation system using <strong>clustering</strong> over <strong>2,500+ videos</strong>, <strong>sentiment analysis</strong> of <strong>180,000+ comments</strong> in <strong>PySpark</strong>, and <strong>content similarity (TF‑IDF)</strong>, generating personalized suggestions based on the current video.</li>
              </ul>
            </div>
            <div class="results-block" style="margin:6px 0 14px;">
              <div class="results-inline-label">Results</div>
              <ul class="desc-list arrow" style="margin:6px 0 0 0;">
                <li>Web app in production, deployed with <strong>Docker</strong> on <strong>Google Cloud Platform</strong>.</li>
                <li>Recommendations computed via a <strong>final score</strong> conditioned on the <strong>currently watched video</strong>.</li>
              </ul>
            </div>
            <div class="links-block" style="margin-top:4px;">
              <a class="btn" href="https://vidrec-321465604500.europe-west1.run.app" target="_blank" rel="noopener noreferrer">Try Demo</a>
              <a class="btn" href="https://github.com/ivanseldas/Sentiment-Driven-Video-Recommendations" target="_blank" rel="noopener noreferrer">GitHub</a>
            </div>
          </div>
          <div class="media">
            <picture>
              <source type="image/webp" srcset="images/projects/recommender_800.webp 800w">
              <img src="images/projects/recommender_800.jpg"
                   srcset="images/projects/recommender_800.jpg 800w, images/projects/recommender_1200.jpg 1200w"
                   sizes="(min-width:900px) 50vw, 100vw"
                   alt="Screenshot of the Sentiment-Driven Video Recommendation app"
                   loading="lazy" />
            </picture>
            <div class="tag-block tags" style="margin-top:28px;">
              <span class="tag" data-skill="Python">Python</span>
              <span class="tag" data-skill="RoBERTa">RoBERTa</span>
              <span class="tag" data-skill="Transformers">Transformers</span>
              <span class="tag" data-skill="scikit-learn">scikit-learn</span>
              <span class="tag" data-skill="Docker">Docker</span>
              <span class="tag" data-skill="GCP">GCP</span>
              <span class="tag" data-skill="FastAPI">FastAPI</span>
              <span class="tag" data-skill="Vector DB">Vector DB</span>
              <span class="tag" data-skill="Embeddings">Embeddings</span>
              <span class="tag" data-skill="MLOps">MLOps</span>
            </div>
          </div>
        </div>
  <!-- Project 1 now links to a dedicated case study page; inline details removed -->
      </article>

      <!-- PROJECT 4 (moved up to position 3) -->
      <article class="card">
        <div class="row">
          <div class="col">
            <h3><a href="projects/churn/index.html" class="project-link" aria-label="Open case study: Telecom Churn Prediction">Clients Churn Prediction</a></h3>
            <p class="microhook-line" style="margin-top:2px;">Can you predict when a customer is about to churn?<br> <span class="intro-story" style="display:inline; font-style:normal; background:none; background-clip:initial; color:#dcdcdc; -webkit-background-clip:initial; filter:none;">I developed a supervised ML pipeline (LogReg, Random Forest, XGBoost) to detect and rank customers at highest risk of churn.</span></p>
            <div class="desc-block">
              <ul class="desc-list">
                <li><strong>EDA + Feature Engineering</strong> to expose churn patterns across categorical and numeric signals.</li>
                <li><strong>Trained and tuned</strong> Logistic Regression, Random Forest, and XGBoost models optimizing for recall and ROC-AUC.</li>
              </ul>
            </div>
            <div class="results-block" style="margin:6px 0 14px;">
              <div class="results-inline-label">Results</div>
              <ul class="desc-list arrow" style="margin:6px 0 0 0;">
                <li><span class="metric">Recall 0.773, Precision 0.94, ROC-AUC 0.928</span> on validation data (tuned XGBoost).</li>
                <li>Potential <span class="metric">20% churn reduction</span> by applying a 30% effectiveness campaign to the <span class="metric">top 500 high-risk customers</span> ranked by the model.</li>
              </ul>
            </div>
            <div class="links-block">
              <a class="btn" href="#">GitHub</a>
            </div>
          </div>
          <div class="media">
            <picture>
              <source type="image/webp" srcset="images/projects/churn_800.webp 800w">
              <img src="images/projects/churn_800.jpg"
                   srcset="images/projects/churn_800.jpg 800w, images/projects/churn_1200.jpg 1200w"
                   sizes="(min-width:900px) 50vw, 100vw"
                   alt="Screenshot of the Telecom Churn Prediction project"
                   loading="lazy" />
            </picture>
            <div class="tag-block tags" style="margin-top:24px;">
              <span class="tag" data-skill="ML">ML</span>
              <span class="tag" data-skill="MLOps">MLOps</span>
              <span class="tag" data-skill="Feature Store">Feature Store</span>
              <span class="tag" data-skill="Streamlit">Streamlit</span>
              <span class="tag" data-skill="FastAPI">FastAPI</span>
              <span class="tag" data-skill="Docker">Docker</span>
              <span class="tag" data-skill="ETL">ETL</span>
              <span class="tag" data-skill="Hyperparameter Tuning">Hyperparameter Tuning</span>
              <span class="tag" data-skill="Monitoring">Monitoring</span>
              <span class="tag" data-skill="XGBoost">XGBoost</span>
              <span class="tag" data-skill="Random Forest">Random Forest</span>
              <span class="tag" data-skill="Logistic Regression">Logistic Regression</span>
            </div>
          </div>
        </div>
        <!-- Expandable details: Project 4 -->
        <div class="project-details" id="details-proj-4" role="region" aria-label="More details: Telecom Churn Prediction">
          <div class="detail-header">
            <h4 class="detail-title">More details</h4>
            <div class="detail-actions">
              <button type="button" class="btn close-details" aria-label="Close details">Close</button>
            </div>
          </div>
          <p class="intro-story" style="margin-top:0;">Feature store powered pipeline with experiment tracking and SHAP-driven explanations. Calibrated ensemble for actionable retention strategies.</p>
          <ul class="desc-list">
            <li>Segment-specific thresholds for contact prioritization.</li>
            <li>Top drivers surfaced for each subscriber for tailored offers.</li>
          </ul>
        </div>
      </article>

      <!-- PROJECT 2 (moved to position 4) -->
      <article class="card">
        <div class="row">
          <div class="col">
            <h3 role="button" tabindex="0" aria-expanded="false" aria-controls="details-proj-2">Barcelona Noise Forecasting</h3>
            <p class="microhook-line" style="margin-top:2px;">Can a city forecast its own noise hotspots before they spike?<br> <span class="intro-story" style="display:inline; font-style:normal; background:none; background-clip:initial; color:#dcdcdc; -webkit-background-clip:initial; filter:none;">Built a multi-model layer to anticipate urban noise hours ahead and guide proactive mitigation.</span></p>
            <div class="desc-block">
              <ul class="desc-list">
                <li><strong>Blended</strong> SARIMA baselines + Gradient Boosting residuals + spatial kriging — closing data gaps in cold sensor zones.</li>
                <li><strong>Automated</strong> holiday / event regressors & monitoring — enabling proactive municipal noise mitigation.</li>
              </ul>
            </div>
            <div class="results-block" style="margin:6px 0 14px;">
              <div class="results-inline-label">Results</div>
              <ul class="results-list">
                <li>
                  <span class="res-icon relevance">
                    <svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="8" /><path d="M12 4v8l5 3" /></svg>
                  </span>
                  <span class="metric">−18% RMSE</span> vs baseline (multi-season).</li>
                <li>
                  <span class="res-icon speed">
                    <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 12a8 8 0 0 1 16 0" /><path d="M12 12 16 8" /><circle cx="12" cy="12" r="1" fill="var(--blue-brand)" stroke="none" /></svg>
                  </span>
                  Increased spatial coverage via kriging for underserved districts.</li>
              </ul>
            </div>
            <div class="links-block">
              <a class="btn" href="#">Notebook</a>
              <a class="btn" href="#">Report</a>
            </div>
          </div>
          <div class="media">
            <picture>
              <source type="image/webp" srcset="images/projects/noise_800.webp 800w">
              <img src="images/projects/noise_800.jpg"
                   srcset="images/projects/noise_800.jpg 800w, images/projects/noise_1200.jpg 1200w"
                   sizes="(min-width:900px) 50vw, 100vw"
                   alt="Screenshot of the Barcelona Noise Forecasting project"
                   loading="lazy" />
            </picture>
            <div class="tag-block tags" style="margin-top:24px;">
              <span class="tag" data-skill="Time Series">Time Series</span>
              <span class="tag" data-skill="SARIMA">SARIMA</span>
              <span class="tag" data-skill="XGBoost">XGBoost</span>
              <span class="tag" data-skill="Geo">Geo</span>
              <span class="tag" data-skill="Statsmodels">Statsmodels</span>
              <span class="tag" data-skill="Feature Store">Feature Store</span>
              <span class="tag" data-skill="ETL">ETL</span>
              <span class="tag" data-skill="MAPE / RMSE">MAPE / RMSE</span>
              <span class="tag" data-skill="Monitoring">Monitoring</span>
            </div>
          </div>
        </div>
        <!-- Expandable details: Project 2 -->
        <div class="project-details" id="details-proj-2" role="region" aria-label="More details: Barcelona Noise Forecasting">
          <div class="detail-header">
            <h4 class="detail-title">More details</h4>
            <div class="detail-actions">
              <button type="button" class="btn close-details" aria-label="Close details">Close</button>
            </div>
          </div>
          <p class="intro-story" style="margin-top:0;">Hybrid SARIMA + gradient boosting residuals with spatial interpolation (kriging) to fill cold zones. Automated regressors for holidays/events and monitoring hooks for drift.</p>
          <ul class="desc-list">
            <li>Feature engineering for temporal/spatial seasonality, weather, and event calendars.</li>
            <li>Backtesting across multi-season windows; prioritized RMSE and coverage stability.</li>
          </ul>
        </div>
      </article>

  <!-- PROJECT 3 (moved to position 5) -->
  <article class="card">
        <div class="row">
          <div class="col">
            <h3 role="button" tabindex="0" aria-expanded="false" aria-controls="details-proj-3">Asthma Risk Prediction System</h3>
            <p class="microhook-line" style="margin-top:2px;">What if we could predict asthma risk before symptoms appear?<br> <span class="intro-story" style="display:inline; font-style:normal; background:none; background-clip:initial; color:#dcdcdc; -webkit-background-clip:initial; filter:none;">Built an ML system forecasting asthma risk from <strong>1.2M+ environmental & clinical records</strong> to surface high‑risk zones early.</span></p>
            <div class="desc-block">
              <ul class="desc-list">
                <li><strong>Trained</strong> regression models (MAE: 0.53) on multi-source datasets estimating individual risk & population hotspots.</li>
                <li><strong>Engineered</strong> ETL pipelines (clean, merge, feature) preparing 1.2M+ records & aligning with medical guidelines.</li>
                <li><strong>Built</strong> interactive Tableau dashboard for exploratory drill-down & public health decision support.</li>
              </ul>
            </div>
            <div class="results-block" style="margin:6px 0 14px;">
              <div class="results-inline-label">Results</div>
              <ul class="results-list">
                <li>
                  <span class="res-icon relevance">
                    <svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="8" /><path d="M12 4v8l5 3" /></svg>
                  </span>
                  <span class="metric">MAE 0.53</span> enabling targeted preventive measures in priority districts.</li>
                <li>
                  <span class="res-icon speed">
                    <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 12a8 8 0 0 1 16 0" /><path d="M12 12 16 8" /><circle cx="12" cy="12" r="1" fill="var(--blue-brand)" stroke="none" /></svg>
                  </span>
                  Interactive risk maps (Tableau) supporting data-driven public health interventions.</li>
              </ul>
            </div>
            <div class="links-block">
              <a class="btn" href="#">View Dashboard</a>
              <a class="btn" href="#">View GitHub</a>
              <a class="btn" href="#">Case Study</a>
            </div>
          </div>
          <div class="media">
            <picture>
              <img src="assets/images/projects/sentiment/final_matrix_triangular.jpg"
                   alt="Asthma Risk Prediction — dashboard placeholder"
                   loading="lazy" />
            </picture>
            <div class="tag-block tags" style="margin-top:24px;">
              <span class="tag" data-skill="Python">Python</span>
              <span class="tag" data-skill="Pandas">Pandas</span>
              <span class="tag" data-skill="scikit-learn">scikit-learn</span>
              <span class="tag" data-skill="ETL">ETL</span>
              <span class="tag" data-skill="Tableau">Tableau</span>
              <span class="tag" data-skill="Data Visualization">Data Visualization</span>
              <span class="tag" data-skill="MAE">MAE</span>
              <span class="tag" data-skill="Risk Modeling">Risk Modeling</span>
            </div>
          </div>
        </div>
        <!-- Expandable details: Project 3 -->
        <div class="project-details" id="details-proj-3" role="region" aria-label="More details: Asthma Risk Prediction System">
          <div class="detail-header">
            <h4 class="detail-title">More details</h4>
            <div class="detail-actions">
              <button type="button" class="btn close-details" aria-label="Close details">Close</button>
            </div>
          </div>
          <p class="intro-story" style="margin-top:0;">Multi-source ETL to align environmental and clinical signals. Model selection focused on explainability and operational thresholds, with dashboarding for public health use.</p>
          <ul class="desc-list">
            <li>Bias/variance checks and MAE-based optimization; calibration where needed.</li>
            <li>Interactive Tableau visuals for hotspot exploration and what-if analysis.</li>
          </ul>
        </div>
      </article>
    </div>
  </section>

  <!-- ABOUT (Bio + Grid + CTA) -->
  <section class="section" id="about" aria-label="About">
    <div class="container">
      <div class="section-title">About</div>
      <div class="about-bio">
        <h3 style="margin:0 0 10px; font-size:var(--fs-lg); letter-spacing:.3px;">Who I Am</h3>
        <div class="bio-block" style="margin-top:4px;">
          <p>I’m a <strong>Data Scientist</strong>, and an Architect.<p>It all began with my <a class="inline-link" href="https://www.youtube.com/watch?v=LzyZGEFMM0M&t=314s" target="_blank" rel="noopener noreferrer">Master's thesis in Architecture</a>, where I designed a data center. To make it real, I had to understand how data actually worked… and I got hooked.</p>
          <p>That spark pushed me to reinvent my career — first at 42 Madrid, learning to code from zero, then at Ironhack, diving deep into Machine Learning and AI.</p>
          <p>As an architect, I helped design and build two residential developments in Sydney. Today, I’m still building — not with concrete and steel, but with data solutions that stand the test of business reality.</p>
        </div>
      </div>
      <div class="about-grid-wrapper">
        <div class="about-grid with-photo">
          <div class="about-photo">
            <div class="about-photo-inner">
              <figure>
                <img src="images/personal_pic.jpg" alt="Iván Seldas casual portrait" loading="lazy" height="400" />
                <figcaption>That's me in Lanzarote. What a place!</figcaption>
              </figure>
            </div>
          </div>
          <div class="about-detail">
            <div class="about-experience">
              <h3>Experience</h3>
              <p style="margin:0 0 6px; font-size:0.9rem; line-height:1.4; color:#d0d0d0;"><strong>Team Leader — Marchese Partners | LIFE3A</strong><br><small>2019 – Present · Madrid<small></small></p>
              <ul>
                <li>Led a 10+ member team across international offices, delivering projects with 200+ residential units.</li>
                <li>Increased productivity by 15% through workshops on new tools and methodologies.</li>
                <li>Reduced delivery time by 40% via workflow optimization and process automation.</li>
              </ul>
            </div>
            <div class="about-edu">
              <h3>Education &amp; Certifications</h3>
              <ul>
                <li><strong>Data Science &amp; Machine Learning Bootcamp</strong><br><small>2024 · Ironhack, Barcelona</small></li>
                <li><strong>Google Advanced Data Analytics Certificate</strong><br><small>2024 · Online</small></li>
                <li><strong>IBM Data Science Professional Certificate</strong><br><small>2025 · Online</small></li>
                <li><strong>42 Madrid Programming Campus</strong><br><small>2022–2023 · Campus Telefónica</small></li>
                <li><strong>Master’s Degree in Architecture</strong><br><small>2019–2021 · Universidad Politécnica de Madrid</small></li>
                <li><strong>Bachelor’s Degree in Architecture</strong><br><small>2013–2019 · Universidad Politécnica de Madrid<br>2017-2018 · Karlsruhe Institute of Technology</small></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT — Conversion-focused minimal block -->
  <section class="section" id="contact">
    <div class="container contact-block">
      <div class="section-title">Contact</div>
      <div class="contact-intro">
  <p class="bio-block" style="font-size:0.78rem; line-height:1.55; margin:14px 0 0; color:#bdbdbd;">Based in <strong>Madrid</strong>, collaborating remotely across Europe. Always open to coffee chats about <em>AI</em> & architecture.</p>
      </div>
      <div class="contact-grid">
        <div class="contact-primary">
          <a class="contact-email-btn" href="mailto:ivanseldasp@gmail.com" aria-label="Send me an email">Email me</a>
          <div class="availability">Currently: <strong>Open to full-time & freelance</strong></div>
        </div>
        <ul class="contact-links" aria-label="Professional links">
          <li data-type="linkedin"><span class="label">LinkedIn</span><a href="https://linkedin.com/in/ivanseldasp" target="_blank" rel="noopener">linkedin.com/in/ivanseldasp</a></li>
          <li data-type="github"><span class="label">GitHub</span><a href="https://github.com/ivanseldas" target="_blank" rel="noopener">github.com/ivanseldas</a></li>
          <li data-type="resume"><span class="label">Resume</span><a href="#" class="resume-link">Download PDF <small>(Updated Aug 2025)</small></a></li>
        </ul>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <div class="container">
      <p>© <span id="year"></span> Iván Seldas. Data science with love.</p>
    </div>
  </footer>

  <script>
    /* Year in footer (guarded) */
    const yearEl = document.getElementById('year');
    if (yearEl) yearEl.textContent = new Date().getFullYear();

    /* Reveal cards as they enter viewport */
    const observer = new IntersectionObserver((entries)=>{
      entries.forEach(entry=>{
        if(entry.isIntersecting){ entry.target.classList.add('visible'); observer.unobserve(entry.target); }
      });
    }, { threshold:0.2 });
    document.querySelectorAll('.card').forEach(el=>observer.observe(el));

    /* Light parallax on project images */
    window.addEventListener('scroll', ()=>{
      document.querySelectorAll('.card img').forEach(img=>{
        if(img.classList.contains('video-thumb')){ img.style.transform='none'; return; }
        const rect = img.getBoundingClientRect();
        const offset = (window.innerHeight - rect.top) * 0.02; // 2% factor
        img.style.transform = `translateY(${offset}px)`;
      });
    });

    /* ======================================
       SKILLS ↔ PROJECT TAGS LINKING + MULTI-SELECT & SORTING
       - Click skills to toggle selection (multi-select)
       - Projects reorder by number of selected-skill matches (desc)
       - Hover highlights (temporary) without changing selection
       ====================================== */
    (()=>{
      // Cache container & capture original order for stable sorting
      const projectContainer = document.querySelector('#projects .container');
      const projectCards = Array.from(document.querySelectorAll('#projects .card'));
      projectCards.forEach((card, idx)=> card.dataset.originalIndex = String(idx));

      // State
      const selectedSkills = new Set();
      let hoveredSkill = null;

      const getSkill = el => (el.dataset.skill || el.textContent || '').trim();

      const scoreCard = (card)=>{
        if(selectedSkills.size===0) return 0;
        const skills = Array.from(card.querySelectorAll('.tag')).map(getSkill);
        return skills.reduce((acc, s)=> acc + (selectedSkills.has(s) ? 1 : 0), 0);
      };

      const updateHighlights = ()=>{
        // Reset
        document.querySelectorAll('#projects .card .tag').forEach(t=>{
          t.style.backgroundColor = 'var(--card)';
          t.style.color = '#bdbdbd';
          t.style.borderColor = 'var(--border)';
        });
        // Selected
        selectedSkills.forEach(skill=>{
          document.querySelectorAll(`#projects .card .tag[data-skill='${skill}']`).forEach(t=>{
            t.style.backgroundColor = 'var(--accent)';
            t.style.color = '#000';
            t.style.borderColor = 'var(--accent)';
          });
        });
        // Hovered (if not already selected)
        if(hoveredSkill && !selectedSkills.has(hoveredSkill)){
          document.querySelectorAll(`#projects .card .tag[data-skill='${hoveredSkill}']`).forEach(t=>{
            t.style.backgroundColor = 'var(--accent)';
            t.style.color = '#000';
            t.style.borderColor = 'var(--accent)';
          });
        }
      };

      // FLIP animation on reorder (satisfying but subtle)
      const updateOrdering = ()=>{
        const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

        // 1) FIRST: capture current positions
        const first = new Map();
        projectCards.forEach(card => first.set(card, card.getBoundingClientRect()));

        // 2) DOM MUTATION: sort & append in new order
        const scored = projectCards.map(card=>({ card, score:scoreCard(card), original:Number(card.dataset.originalIndex) }));
        scored.sort((a,b)=> b.score - a.score || a.original - b.original); // desc by score, stable by original
        scored.forEach(({card})=> projectContainer.appendChild(card)); // appending reorders

        if (prefersReduced) return; // respect reduced motion

        // 3) LAST: capture new positions and FLIP
        const animDuration = 450; // ms
        projectCards.forEach(card => {
          const last = card.getBoundingClientRect();
          const f = first.get(card);
          const dx = (f?.left ?? last.left) - last.left;
          const dy = (f?.top  ?? last.top)  - last.top;

          if (dx || dy) {
            card.style.transition = 'none';
            card.style.transform = `translate(${dx}px, ${dy}px)`;
            // Force reflow
            card.getBoundingClientRect();
            // Animate back to natural position
            card.style.transition = `transform ${animDuration}ms cubic-bezier(0.22, 1, 0.36, 1)`;
            card.style.transform = 'translate(0, 0)';
            const onEnd = () => { card.style.transition = ''; card.removeEventListener('transitionend', onEnd); };
            card.addEventListener('transitionend', onEnd);
          }
        });
      };

      // Wire up skill chips
  document.querySelectorAll('#skills .tag').forEach(skillTag=>{
        const skill = getSkill(skillTag);

        // Hover: temporary highlight
        skillTag.addEventListener('mouseenter', ()=>{ hoveredSkill = skill; updateHighlights(); });
        skillTag.addEventListener('mouseleave', ()=>{ hoveredSkill = null; updateHighlights(); });

        // Click: toggle selection and reorder
        skillTag.addEventListener('click', (e)=>{
          e.preventDefault();
          if(selectedSkills.has(skill)){ selectedSkills.delete(skill); skillTag.classList.remove('selected'); }
          else { selectedSkills.add(skill); skillTag.classList.add('selected'); }
          updateHighlights();
          updateOrdering();
          updateClearButton();
        });
      });

      // Clear selection button logic
      const clearBtn = document.getElementById('clear-skills-btn');
      const updateClearButton = () => {
        if(!clearBtn) return;
        if(selectedSkills.size > 0){
          clearBtn.classList.add('visible');
          clearBtn.setAttribute('aria-hidden','false');
        } else {
          clearBtn.classList.remove('visible');
          clearBtn.setAttribute('aria-hidden','true');
        }
        // Update match counter
        const counterEl = document.getElementById('skill-match-count');
        if(counterEl){
          if(selectedSkills.size===0){
            counterEl.style.display='none';
          } else {
            // Count cards with at least one selected skill
            const matched = projectCards.filter(card=> scoreCard(card) > 0 ).length;
            counterEl.textContent = `(${matched} match${matched===1?'':'es'})`;
            counterEl.style.display='inline';
          }
        }
      };
      if(clearBtn){
        clearBtn.addEventListener('click', ()=>{
          selectedSkills.clear();
          document.querySelectorAll('#skills .tag.selected').forEach(t=> t.classList.remove('selected'));
          hoveredSkill = null;
          updateHighlights();
          updateOrdering();
          updateClearButton();
        });
      }
      // Initialize state
      updateClearButton();
    })();

    /* Missing skill suggestion — store only (localStorage) */
    (function(){
      const triggerBtn = document.getElementById('add-missing-skill-btn');
      const form = document.getElementById('add-missing-skill-form');
      const input = document.getElementById('new-skill-input');
      const cancel = document.getElementById('cancel-add-skill');
      const successBox = document.getElementById('skill-suggest-success');
      const countEl = document.getElementById('suggest-count');
      const exportBtn = document.getElementById('export-skill-suggestions');
      if(!triggerBtn || !form || !input || !cancel) return;

      const STORAGE_KEY = 'suggestedSkills';
      const load = () => {
        try { return JSON.parse(localStorage.getItem(STORAGE_KEY)||'[]'); } catch(e){ return []; }
      };
      const save = list => { try { localStorage.setItem(STORAGE_KEY, JSON.stringify(list)); } catch(e){} };
      const updateCount = () => { const list = load(); if(countEl){ countEl.textContent = list.length; } };
      updateCount();

      triggerBtn.addEventListener('click', ()=>{
        const show = form.style.display==='none';
        form.style.display = show ? 'flex' : 'none';
        if(show){ input.focus(); }
      });
      cancel.addEventListener('click', ()=>{ form.style.display='none'; input.value=''; });
      form.addEventListener('submit', (e)=>{
        e.preventDefault();
        const raw = input.value.trim();
        if(!raw) return;
        const parts = raw.split(',').map(s=>s.trim()).filter(Boolean);
        if(parts.length===0) return;
        const current = load();
        parts.forEach(p=>{ if(!current.map(c=>c.toLowerCase()).includes(p.toLowerCase())) current.push(p); });
        save(current);
        input.value='';
        form.style.display='none';
        updateCount();
        if(successBox){ successBox.style.display='block'; successBox.classList.add('flash'); setTimeout(()=> successBox.style.display='none', 3000); }
      });
      if(exportBtn){
        exportBtn.addEventListener('click', ()=>{
          const data = load();
          const blob = new Blob([JSON.stringify({ exportedAt:new Date().toISOString(), skills:data }, null, 2)], { type:'application/json' });
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url; a.download = 'suggested_skills.json';
          document.body.appendChild(a); a.click(); a.remove();
          setTimeout(()=> URL.revokeObjectURL(url), 1000);
        });
      }
    })();

    /* Click ripple feedback (aligned with pointer using clientX/Y) */
    document.addEventListener('click',(e)=>{
      const ripple = document.createElement('div');
      ripple.className = 'click-feedback';
      ripple.style.left = (e.clientX - 20) + 'px';
      ripple.style.top = (e.clientY - 20) + 'px';
      document.body.appendChild(ripple);
      setTimeout(()=> ripple.remove(), 500);
    });

    /* Local video hover playback (lazy src + autoplay fallback + desktop click) */
    (function(){
      const vids = document.querySelectorAll('#projects .video-wrapper video.project-video');
      if(!vids.length) return;
      vids.forEach(video=>{
        const wrapper = video.closest('.video-wrapper');
        let loaded = false;
        let attempted = false;
        const ensureSrc = ()=>{
          if(!loaded && video.dataset.src){
            video.src = video.dataset.src;
            video.load();
            loaded = true;
          }
        };
        const tryPlay = ()=>{
          attempted = true;
          ensureSrc();
          video.muted = true; // ensure autoplay allowed
            if(!video.hasAttribute('autoplay')) video.setAttribute('autoplay','');
          const p = video.play();
          if(p && typeof p.then==='function'){
            p.then(()=>{ wrapper.classList.add('playing','ready'); })
             .catch(err=>{
               // Hover not considered a user gesture sometimes; mark ready so first frame shows
               wrapper.classList.add('ready');
               wrapper.dataset.playError = err.name || 'PlayError';
             });
          } else {
            wrapper.classList.add('playing','ready');
          }
        };
        const pause = ()=>{ if(!video.paused) video.pause(); wrapper.classList.remove('playing'); };
        // Hover / focus start
        wrapper.addEventListener('mouseenter', tryPlay);
        wrapper.addEventListener('focusin', tryPlay);
        // Leave stops (only if not touch)
        wrapper.addEventListener('mouseleave', ()=>{ if(window.matchMedia('(hover:hover)').matches) pause(); });
        wrapper.addEventListener('focusout', pause);
        // Always allow click toggle (desktop & mobile)
        wrapper.addEventListener('click', (e)=>{
          e.preventDefault();
          if(video.paused) { tryPlay(); }
          else { pause(); }
        });
        // Mark ready when metadata arrives (first frame visible even if play blocked)
        video.addEventListener('loadeddata', ()=> wrapper.classList.add('ready'));
        // Preload when near viewport for faster hover start
        const io = new IntersectionObserver(entries=>{
          entries.forEach(en=>{
            if(en.isIntersecting){ ensureSrc(); io.disconnect(); }
          });
        }, { rootMargin:'200px' });
        io.observe(wrapper);
      });
    })();


    /* Mobile nav toggle */
    (function(){
      const toggle = document.getElementById('nav-toggle');
      const headerEl = document.querySelector('header');
      const navLinks = document.getElementById('site-nav-links');
      if(!toggle || !headerEl || !navLinks) return;
      const closeMenu = ()=>{
        headerEl.classList.remove('nav-open');
        document.body.classList.remove('menu-open');
        toggle.setAttribute('aria-expanded','false');
        toggle.setAttribute('aria-label','Open navigation');
      };
      toggle.addEventListener('click', ()=>{
        const open = headerEl.classList.toggle('nav-open');
        if(open){
          document.body.classList.add('menu-open');
          toggle.setAttribute('aria-expanded','true');
          toggle.setAttribute('aria-label','Close navigation');
        } else closeMenu();
      });
      navLinks.addEventListener('click', e=>{
        if(e.target.matches('a')) closeMenu();
      });
      document.addEventListener('keydown', e=>{
        if(e.key==='Escape') closeMenu();
      });
    })();

  // Depth parallax removed for performance and compact layout focus
  // YouTube video loader removed — using static preview images for all project cards now.

  /* Expand/collapse project details and lazy-load app iframes */
  (function(){
    const cards = document.querySelectorAll('#projects .card');
    const closeAll = () => {
      cards.forEach(card => {
        card.classList.remove('open');
        const title = card.querySelector('h3[role="button"]');
        const region = card.querySelector('.project-details');
        if(title) title.setAttribute('aria-expanded','false');
        if(region) region.setAttribute('aria-hidden','true');
      });
    };

    const openCard = (card) => {
      // Close others for accordion behavior
      closeAll();
      card.classList.add('open');
      const title = card.querySelector('h3[role="button"]');
      const region = card.querySelector('.project-details');
      if(title) title.setAttribute('aria-expanded','true');
      if(region) region.setAttribute('aria-hidden','false');
      // Lazy-set iframe src if app URL present
      if(region) {
        const appUrl = region.getAttribute('data-app-url');
        const iframe = region.querySelector('.app-frame');
        if(appUrl && iframe && !iframe.src){
          iframe.src = appUrl;
        }
      }
      // Scroll into view smoothly below header
      const rect = card.getBoundingClientRect();
      const y = window.scrollY + rect.top - 90;
      window.scrollTo({ top: y, behavior: 'smooth' });
    };

  cards.forEach(card => {
      const title = card.querySelector('h3[role="button"]');
      const region = card.querySelector('.project-details');
      if(!title || !region) return;
      region.setAttribute('aria-hidden','true');
      const handler = (e) => {
        e.preventDefault();
        const isOpen = card.classList.contains('open');
        if(isOpen){
          card.classList.remove('open');
          title.setAttribute('aria-expanded','false');
          region.setAttribute('aria-hidden','true');
        } else {
          openCard(card);
        }
      };
      title.addEventListener('click', handler);
      title.addEventListener('keydown', (e)=>{
        if(e.key==='Enter' || e.key===' '){ handler(e); }
      });
      const closeBtn = card.querySelector('.project-details .close-details');
      if(closeBtn){
        closeBtn.addEventListener('click', (e)=>{ e.preventDefault(); handler(e); });
      }
    });

  // Close details with Escape if focus is within the open card
    document.addEventListener('keydown', (e)=>{
      if(e.key !== 'Escape') return;
      const open = document.querySelector('#projects .card.open');
      if(!open) return;
      const title = open.querySelector('h3[role="button"]');
      const region = open.querySelector('.project-details');
      open.classList.remove('open');
      if(title) title.setAttribute('aria-expanded','false');
      if(region) region.setAttribute('aria-hidden','true');
      if(title) title.focus();
    });
  })();
  </script>
</body>
</html>
